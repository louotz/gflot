'use strict';(function(r){var p=function(c,a){var b=a.getElementsByClassName(c)[0];if(!b&&(b=document.createElement("canvas"),b.className=c,b.style.direction="ltr",b.style.position="absolute",b.style.left="0px",b.style.top="0px",a.appendChild(b),!b.getContext))throw Error("Canvas is not available.");this.element=b;c=this.context=b.getContext("2d");this.pixelRatio=r.plot.browser.getPixelRatio(c);a=a.getBoundingClientRect();this.resize(a.width,a.height);this.SVGContainer=null;this.SVG={};this._textCache=
{}};p.prototype.resize=function(c,a){c=10>c?10:c;a=10>a?10:a;var b=this.element,e=this.context,d=this.pixelRatio;this.width!==c&&(b.width=c*d,b.style.width=c+"px",this.width=c);this.height!==a&&(b.height=a*d,b.style.height=a+"px",this.height=a);e.restore();e.save();e.scale(d,d)};p.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};p.prototype.render=function(){var c=this._textCache,a;for(a in c)if(hasOwnProperty.call(c,a)){var b=this.getSVGLayer(a),e=c[a],d=b.style.display;
b.style.display="none";for(var k in e)if(hasOwnProperty.call(e,k)){var h=e[k],l;for(l in h)if(hasOwnProperty.call(h,l)){for(var f=h[l],n=f.positions,g=0,m;n[g];g++)if(m=n[g],m.active)m.rendered||(b.appendChild(m.element),m.rendered=!0);else if(n.splice(g--,1),m.rendered){for(;m.element.firstChild;)m.element.removeChild(m.element.firstChild);m.element.parentNode.removeChild(m.element)}0===n.length&&(f.measured?f.measured=!1:delete h[l])}}b.style.display=d}};p.prototype.getSVGLayer=function(c){var a=
this.SVG[c];if(!a){if(this.SVGContainer)var b=this.SVGContainer.firstChild;else this.SVGContainer=document.createElement("div"),this.SVGContainer.className="flot-svg",this.SVGContainer.style.position="absolute",this.SVGContainer.style.top="0px",this.SVGContainer.style.left="0px",this.SVGContainer.style.bottom="0px",this.SVGContainer.style.right="0px",this.SVGContainer.style.pointerEvents="none",this.element.parentNode.appendChild(this.SVGContainer),b=document.createElementNS("http://www.w3.org/2000/svg",
"svg"),b.style.width="100%",b.style.height="100%",this.SVGContainer.appendChild(b);a=document.createElementNS("http://www.w3.org/2000/svg","g");a.setAttribute("class",c);a.style.position="absolute";a.style.top="0px";a.style.left="0px";a.style.bottom="0px";a.style.right="0px";b.appendChild(a);this.SVG[c]=a}return a};p.prototype.getTextInfo=function(c,a,b,e,d){a=""+a;var k="object"===typeof b?b.style+" "+b.variant+" "+b.weight+" "+b.size+"px/"+b.lineHeight+"px "+b.family:b;var h=this._textCache[c];
null==h&&(h=this._textCache[c]={});e=h[k];null==e&&(e=h[k]={});h=a.replace(/0|1|2|3|4|5|6|7|8|9/g,"0");var l=e[h];if(!l){var f=document.createElementNS("http://www.w3.org/2000/svg","text");-1!==a.indexOf("\x3cbr\x3e")?q(a,f,-9999):(a=document.createTextNode(a),f.appendChild(a));f.style.position="absolute";f.style.maxWidth=d;f.setAttributeNS(null,"x",-9999);f.setAttributeNS(null,"y",-9999);"object"===typeof b?(f.style.font=k,f.style.fill=b.fill):"string"===typeof b&&f.setAttribute("class",b);this.getSVGLayer(c).appendChild(f);
c=f.getBBox();for(l=e[h]={width:c.width,height:c.height,measured:!0,element:f,positions:[]};f.firstChild;)f.removeChild(f.firstChild);f.parentNode.removeChild(f)}l.measured=!0;return l};p.prototype.addText=function(c,a,b,e,d,k,h,l,f,n){var g=this.getTextInfo(c,e,d,k,h);c=g.positions;"center"===l?a-=g.width/2:"right"===l&&(a-=g.width);"middle"===f?b-=g.height/2:"bottom"===f&&(b-=g.height);b+=.75*g.height;for(f=0;c[f];f++){d=c[f];if(d.x===a&&d.y===b&&d.text===e){d.active=!0;return}if(!1===d.active){d.active=
!0;d.text=e;-1!==e.indexOf("\x3cbr\x3e")?(b-=.25*g.height,q(e,d.element,a)):d.element.textContent=e;d.element.setAttributeNS(null,"x",a);d.element.setAttributeNS(null,"y",b);d.x=a;d.y=b;return}}d={active:!0,rendered:!1,element:c.length?g.element.cloneNode():g.element,text:e,x:a,y:b};c.push(d);-1!==e.indexOf("\x3cbr\x3e")?(b-=.25*g.height,q(e,d.element,a)):d.element.textContent=e;d.element.setAttributeNS(null,"x",a);d.element.setAttributeNS(null,"y",b);d.element.style.textAlign=l;n&&n.forEach(function(m){g.element.transform.baseVal.appendItem(m)})};
var q=function(c,a,b){c=c.split("\x3cbr\x3e");var e;for(e=0;e<c.length;e++){if(a.childNodes[e])var d=a.childNodes[e];else d=document.createElementNS("http://www.w3.org/2000/svg","tspan"),a.appendChild(d);d.textContent=c[e];var k=1*e+"em";d.setAttributeNS(null,"dy",k);d.setAttributeNS(null,"x",b)}};p.prototype.removeText=function(c,a,b,e,d,k){var h;if(null==e){if(c=this._textCache[c],null!=c)for(var l in c)if(hasOwnProperty.call(c,l)){d=c[l];for(var f in d)hasOwnProperty.call(d,f)&&(k=d[f].positions,
k.forEach(function(g){g.active=!1}))}}else{var n=this.getTextInfo(c,e,d,k);k=n.positions;k.forEach(function(g){h=b+.75*n.height;g.x===a&&g.y===h&&g.text===e&&(g.active=!1)})}};p.prototype.clearCache=function(){var c=this._textCache,a;for(a in c)if(hasOwnProperty.call(c,a))for(var b=this.getSVGLayer(a);b.firstChild;)b.removeChild(b.firstChild);this._textCache={}};window.Flot||(window.Flot={});window.Flot.Canvas=p})(jQuery);
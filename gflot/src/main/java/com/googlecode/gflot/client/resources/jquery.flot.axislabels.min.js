'use strict';(function(m){function k(a,b,g,e,d,c){this.axisName=a;this.position=b;this.padding=g;this.placeholder=e;this.axisLabel=d;this.surface=c;this.height=this.width=0;this.elem=null}k.prototype.calculateSize=function(){var a=this.axisName+"Label";a=this.surface.getTextInfo(a+"Layer",this.axisLabel,a+" axisLabels");this.labelWidth=a.width;this.labelHeight=a.height;"left"===this.position||"right"===this.position?(this.width=this.labelHeight+this.padding,this.height=0):(this.width=0,this.height=
this.labelHeight+this.padding)};k.prototype.transforms=function(a,b,g,e){var d=[];if(0!==b||0!==g){var c=e.createSVGTransform();c.setTranslate(b,g);d.push(c)}0!==a&&(b=e.createSVGTransform(),b.setRotate(a,Math.round(this.labelWidth/2),0),d.push(b));return d};k.prototype.calculateOffsets=function(a){var b={x:0,y:0,degrees:0};"bottom"===this.position?(b.x=a.left+a.width/2-this.labelWidth/2,b.y=a.top+a.height-this.labelHeight):"top"===this.position?(b.x=a.left+a.width/2-this.labelWidth/2,b.y=a.top):
"left"===this.position?(b.degrees=-90,b.x=a.left-this.labelWidth/2,b.y=a.height/2+a.top):"right"===this.position&&(b.degrees=90,b.x=a.left+a.width-this.labelWidth/2,b.y=a.height/2+a.top);b.x=Math.round(b.x);b.y=Math.round(b.y);return b};k.prototype.cleanup=function(){var a=this.axisName+"Label";this.surface.removeText(a+"Layer",0,0,this.axisLabel,a+" axisLabels")};k.prototype.draw=function(a){var b=this.axisName+"Label",g=b+"Layer";b+=" axisLabels";a=this.calculateOffsets(a);var e={position:"absolute",
bottom:"",right:"",display:"inline-block","white-space":"nowrap"},d=this.surface.getSVGLayer(g);a=this.transforms(a.degrees,a.x,a.y,d.parentNode);this.surface.addText(g,0,0,this.axisLabel,b,void 0,void 0,void 0,void 0,a);this.surface.render();Object.keys(e).forEach(function(c){d.style[c]=e[c]})};m.plot.plugins.push({init:function(a){a.hooks.processOptions.push(function(b,g){if(g.axisLabels.show){var e={};b.hooks.axisReserveSpace.push(function(d,c){var f=c.options,h=c.direction+c.n;c.labelHeight+=
c.boxPosition.centerY;c.labelWidth+=c.boxPosition.centerX;if(f&&f.axisLabel&&c.show){var n=void 0===f.axisLabelPadding?2:f.axisLabelPadding,l=e[h];l||(l=new k(h,f.position,n,d.getPlaceholder()[0],f.axisLabel,d.getSurface()),e[h]=l);l.calculateSize();c.labelHeight+=l.height;c.labelWidth+=l.width}});b.hooks.draw.push(function(d,c){m.each(d.getAxes(),function(f,h){(f=h.options)&&f.axisLabel&&h.show&&e[h.direction+h.n].draw(h.box)})});b.hooks.shutdown.push(function(d,c){for(var f in e)e[f].cleanup()})}})},
options:{axisLabels:{show:!0}},name:"axisLabels",version:"3.0"})})(jQuery);
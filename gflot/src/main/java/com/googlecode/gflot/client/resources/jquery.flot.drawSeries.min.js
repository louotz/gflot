'use strict';(function(B){B.plot.drawSeries=new function(){function C(a,f,l,m,c,t,e,g,d,b,k){var r,u;if(b){var v=r=u=!0;var w=!1;b=l;l=f+m;c=f+c;a<b&&(f=a,a=b,b=f,w=!0,r=!1)}else w=r=u=!0,v=!1,b=a+m,a+=c,c=l,l=f,l<c&&(f=l,l=c,c=f,v=!0,u=!1);a<e.min||b>e.max||l<g.min||c>g.max||(b<e.min&&(b=e.min,w=!1),a>e.max&&(a=e.max,r=!1),c<g.min&&(c=g.min,v=!1),l>g.max&&(l=g.max,u=!1),b=e.p2c(b),c=g.p2c(c),a=e.p2c(a),l=g.p2c(l),t&&(d.fillStyle=t(c,l),d.fillRect(b,l,a-b,c-l)),0<k&&(w||r||u||v)&&(d.beginPath(),d.moveTo(b,
c),w?d.lineTo(b,l):d.moveTo(b,l),u?d.lineTo(a,l):d.moveTo(a,l),r?d.lineTo(a,c):d.moveTo(a,c),v?d.lineTo(b,c):d.moveTo(b,c),d.stroke()))}function A(a,f,l,m,c){var t=a.fill;if(!t)return null;if(a.fillColor)return c(a.fillColor,l,m,f);a=B.color.parse(f);a.a="number"===typeof t?t:.4;a.normalize();return a.toString()}this.drawSeriesLines=function(a,f,l,m,c,t,e){f.save();f.translate(l.left,l.top);f.lineJoin="round";a.lines.dashes&&f.setLineDash&&f.setLineDash(a.lines.dashes);t=a.datapoints.points;l=a.datapoints.pointsize;
a.decimate&&(t=a.decimate(a,a.xaxis.min,a.xaxis.max,m,a.yaxis.min,a.yaxis.max,c));m=a.lines.lineWidth;f.lineWidth=m;f.strokeStyle=a.color;if(c=A(a.lines,a.color,0,c,e)){f.fillStyle=c;c=a.xaxis;e=a.yaxis;var g=a.lines.fillTowards||0,d=t,b=l;g=g>e.min?Math.min(e.max,g):e.min;for(var k=0,r=1,u=!1,v=0,w=0;!(0<b&&k>d.length+b);){k+=b;var h=d[k-b],n=d[k-b+r],p=d[k],q=d[k+r];-2===b&&(n=q=g);if(u){if(0<b&&null!=h&&null==p){w=k;b=-b;r=2;continue}if(0>b&&k===v+b){f.fill();u=!1;b=-b;k=v=w+b;continue}}if(null!=
h&&null!=p){if(h<=p&&h<c.min){if(p<c.min)continue;n=(c.min-h)/(p-h)*(q-n)+n;h=c.min}else if(p<=h&&p<c.min){if(h<c.min)continue;q=(c.min-h)/(p-h)*(q-n)+n;p=c.min}if(h>=p&&h>c.max){if(p>c.max)continue;n=(c.max-h)/(p-h)*(q-n)+n;h=c.max}else if(p>=h&&p>c.max){if(h>c.max)continue;q=(c.max-h)/(p-h)*(q-n)+n;p=c.max}u||(f.beginPath(),f.moveTo(c.p2c(h),e.p2c(g)),u=!0);if(n>=e.max&&q>=e.max)f.lineTo(c.p2c(h),e.p2c(e.max)),f.lineTo(c.p2c(p),e.p2c(e.max));else if(n<=e.min&&q<=e.min)f.lineTo(c.p2c(h),e.p2c(e.min)),
f.lineTo(c.p2c(p),e.p2c(e.min));else{var y=h,x=p;n<=q&&n<e.min&&q>=e.min?(h=(e.min-n)/(q-n)*(p-h)+h,n=e.min):q<=n&&q<e.min&&n>=e.min&&(p=(e.min-n)/(q-n)*(p-h)+h,q=e.min);n>=q&&n>e.max&&q<=e.max?(h=(e.max-n)/(q-n)*(p-h)+h,n=e.max):q>=n&&q>e.max&&n<=e.max&&(p=(e.max-n)/(q-n)*(p-h)+h,q=e.max);h!==y&&f.lineTo(c.p2c(y),e.p2c(n));f.lineTo(c.p2c(h),e.p2c(n));f.lineTo(c.p2c(p),e.p2c(q));p!==x&&(f.lineTo(c.p2c(p),e.p2c(q)),f.lineTo(c.p2c(x),e.p2c(q)))}}}}if(0<m){m=a.xaxis;a=a.yaxis;e=c=null;f.beginPath();
for(r=l;r<t.length;r+=l)if(d=t[r-l],b=t[r-l+1],g=t[r],k=t[r+1],null!==d&&null!==g){if(b<=k&&b<a.min){if(k<a.min)continue;d=(a.min-b)/(k-b)*(g-d)+d;b=a.min}else if(k<=b&&k<a.min){if(b<a.min)continue;g=(a.min-b)/(k-b)*(g-d)+d;k=a.min}if(b>=k&&b>a.max){if(k>a.max)continue;d=(a.max-b)/(k-b)*(g-d)+d;b=a.max}else if(k>=b&&k>a.max){if(b>a.max)continue;g=(a.max-b)/(k-b)*(g-d)+d;k=a.max}if(d<=g&&d<m.min){if(g<m.min)continue;b=(m.min-d)/(g-d)*(k-b)+b;d=m.min}else if(g<=d&&g<m.min){if(d<m.min)continue;k=(m.min-
d)/(g-d)*(k-b)+b;g=m.min}if(d>=g&&d>m.max){if(g>m.max)continue;b=(m.max-d)/(g-d)*(k-b)+b;d=m.max}else if(g>=d&&g>m.max){if(d>m.max)continue;k=(m.max-d)/(g-d)*(k-b)+b;g=m.max}d===c&&b===e||f.moveTo(m.p2c(d)+0,a.p2c(b)+0);c=g;e=k;f.lineTo(m.p2c(g)+0,a.p2c(k)+0)}f.stroke()}f.restore()};this.drawSeriesPoints=function(a,f,l,m,c,t,e){function g(k,r,u,v,w,h){k.moveTo(r+v,u);k.arc(r,u,v,0,w?Math.PI:2*Math.PI,!1)}g.fill=!0;f.save();f.translate(l.left,l.top);l={format:a.datapoints.format,points:a.datapoints.points,
pointsize:a.datapoints.pointsize};a.decimatePoints&&(l.points=a.decimatePoints(a,a.xaxis.min,a.xaxis.max,m,a.yaxis.min,a.yaxis.max,c));m=a.points.lineWidth;c=a.points.radius;var d=a.points.symbol,b;"circle"===d?b=g:"string"===typeof d&&t&&t[d]?b=t[d]:"function"===typeof t&&(b=t);0===m&&(m=1E-4);f.lineWidth=m;f.fillStyle=A(a.points,a.color,null,null,e);f.strokeStyle=a.color;(function(k,r,u,v,w,h,n,p){var q=k.points;k=k.pointsize;f.beginPath();for(var y=0;y<q.length;y+=k){var x=q[y],z=q[y+1];null==
x||x<h.min||x>h.max||z<n.min||z>n.max||(x=h.p2c(x),z=n.p2c(z)+v,p(f,x,z,r,w,u))}p.fill&&!w&&f.fill();f.stroke()})(l,c,!0,0,!1,a.xaxis,a.yaxis,b);f.restore()};this.drawSeriesBars=function(a,f,l,m,c,t,e){f.save();f.translate(l.left,l.top);l={format:a.datapoints.format,points:a.datapoints.points,pointsize:a.datapoints.pointsize};a.decimate&&(l.points=a.decimate(a,a.xaxis.min,a.xaxis.max,m));f.lineWidth=a.bars.lineWidth;f.strokeStyle=a.color;c=a.bars.barWidth[0]||a.bars.barWidth;switch(a.bars.align){case "left":m=
0;break;case "right":m=-c;break;default:m=-c/2}(function(g,d,b,k,r,u){var v=g.points;g=g.pointsize;var w=a.bars.fillTowards||0;w=w>u.min?Math.min(u.max,w):u.min;for(var h=0;h<v.length;h+=g)null!=v[h]&&C(v[h],v[h+1],3===g?v[h+2]:w,d,b,k,r,u,f,a.bars.horizontal,a.bars.lineWidth)})(l,m,m+c,a.bars.fill?function(g,d){return A(a.bars,a.color,g,d,e)}:null,a.xaxis,a.yaxis);f.restore()};this.drawBar=C}})(jQuery);
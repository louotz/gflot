'use strict';(function(t){function I(d,l){function u(a,b){a=a.getOptions();if(a.grid.hoverable||a.grid.clickable)b[0].addEventListener("touchevent",y,!1),b[0].addEventListener("tap",B.generatePlothoverEvent,!1);l.grid.clickable&&b.click(C);l.grid.hoverable&&(b.mousemove(p),b.bind("mouseleave",q))}function v(a,b){b[0].removeEventListener("tap",B.generatePlothoverEvent);b[0].removeEventListener("tap",y);b.unbind("mousemove",p);b.unbind("mouseleave",q);b.unbind("click",C);h=[]}function m(a,b,c){var e=
d.getData();if(void 0!==a&&0<e.length&&void 0!==e[0].xaxis.c2p&&void 0!==e[0].yaxis.c2p){var g=b+"able";D("plot"+b,a,function(f){return!1!==e[f][g]},c)}}function p(a){z=a;d.getPlaceholder()[0].lastMouseMoveEvent=a;m(a,w.hover)}function q(a){z=void 0;d.getPlaceholder()[0].lastMouseMoveEvent=void 0;D("plothover",a,function(b){return!1})}function C(a){m(a,w.click)}function y(){d.unhighlight();d.getPlaceholder().trigger("plothovercleanup")}function D(a,b,c,e){var g=d.getOptions(),f=d.offset(),n=J.getPageXY(b),
k=n.X-f.left,r=n.Y-f.top;b=d.c2p({left:k,top:r});e=void 0!==e?e:g.grid.mouseActiveRadius;b.pageX=n.X;b.pageY=n.Y;if(c=d.findNearbyItem(k,r,c,e))c.pageX=parseInt(c.series.xaxis.p2c(c.datapoint[0])+f.left,10),c.pageY=parseInt(c.series.yaxis.p2c(c.datapoint[1])+f.top,10);if(g.grid.autoHighlight){for(g=0;g<h.length;++g)f=h[g],(f.auto!==a||c&&f.series===c.series&&f.point[0]===c.datapoint[0]&&f.point[1]===c.datapoint[1])&&c||E(f.series,f.point);c&&F(c.series,c.datapoint,a)}d.getPlaceholder().trigger(a,
[b,c])}function F(a,b,c){"number"===typeof a&&(a=d.getData()[a]);if("number"===typeof b){var e=a.datapoints.pointsize;b=a.datapoints.points.slice(e*b,e*(b+1))}e=G(a,b);-1===e?(h.push({series:a,point:b,auto:c}),d.triggerRedrawOverlay()):c||(h[e].auto=!1)}function E(a,b){if(null==a&&null==b)h=[],d.triggerRedrawOverlay();else{"number"===typeof a&&(a=d.getData()[a]);if("number"===typeof b){var c=a.datapoints.pointsize;b=a.datapoints.points.slice(c*b,c*(b+1))}a=G(a,b);-1!==a&&(h.splice(a,1),d.triggerRedrawOverlay())}}
function G(a,b){for(var c=0;c<h.length;++c){var e=h[c];if(e.series===a&&e.point[0]===b[0]&&e.point[1]===b[1])return c}return-1}function K(){y();m(z,w.hover)}function L(a,b,c){c=a.getPlotOffset();b.save();b.translate(c.left,c.top);for(c=0;c<h.length;++c){var e=h[c];if(e.series.bars.show)M(e.series,e.point,b);else{var g=e.series,f=e.point;e=b;var n=a,k=f[0];f=f[1];var r=g.xaxis,A=g.yaxis,x="string"===typeof g.highlightColor?g.highlightColor:t.color.parse(g.color).scale("a",.5).toString();if(!(k<r.min||
k>r.max||f<A.min||f>A.max)){var H=g.points.radius+g.points.lineWidth/2;e.lineWidth=H;e.strokeStyle=x;x=1.5*H;k=r.p2c(k);f=A.p2c(f);e.beginPath();g=g.points.symbol;if("circle"===g)e.arc(k,f,x,0,2*Math.PI,!1);else if("string"===typeof g&&n.drawSymbol&&n.drawSymbol[g])n.drawSymbol[g](e,k,f,x,!1);e.closePath();e.stroke()}}}b.restore()}var h=[],w={click:"click",hover:"hover"},z=d.getPlaceholder()[0].lastMouseMoveEvent;d.highlight=F;d.unhighlight=E;var B={generatePlothoverEvent:function(a){var b=d.getOptions(),
c=new CustomEvent("mouseevent");c.pageX=a.detail.changedTouches[0].pageX;c.pageY=a.detail.changedTouches[0].pageY;c.clientX=a.detail.changedTouches[0].clientX;c.clientY=a.detail.changedTouches[0].clientY;b.grid.hoverable&&m(c,w.hover,30);return!1}};if(l.grid.hoverable||l.grid.clickable)d.hooks.bindEvents.push(u),d.hooks.shutdown.push(v),d.hooks.drawOverlay.push(L),d.hooks.processRawData.push(K)}function M(d,l,u){var v="string"===typeof d.highlightColor?d.highlightColor:t.color.parse(d.color).scale("a",
.5).toString(),m=d.bars.barWidth[0]||d.bars.barWidth;switch(d.bars.align){case "left":var p=0;break;case "right":p=-m;break;default:p=-m/2}u.lineWidth=d.bars.lineWidth;u.strokeStyle=v;var q=d.bars.fillTowards||0;q=q>d.yaxis.min?Math.min(d.yaxis.max,q):d.yaxis.min;t.plot.drawSeries.drawBar(l[0],l[1],l[2]||q,p,p+m,function(){return v},d.xaxis,d.yaxis,u,d.bars.horizontal,d.bars.lineWidth)}var J=t.plot.browser;t.plot.plugins.push({init:function(d){d.hooks.processOptions.push(I)},options:{grid:{hoverable:!1,
clickable:!1}},name:"hover",version:"0.1"})})(jQuery);
'use strict';(function(k){var t=k.plot.saturated,y=k.plot.browser,u=k.plot.uiConstants.SNAPPING_CONSTANT,m=k.plot.uiConstants.PANHINT_LENGTH_CONSTANT;k.plot.plugins.push({init:function(d){function P(a,b,e){var c=y.getPageXY(a);a=d.offset();a.left=c.X-a.left;a.top=c.Y-a.top;var f=d.getPlaceholder().offset();f.left=c.X-f.left;f.top=c.Y-f.top;c=d.getXAxes().concat(d.getYAxes()).filter(function(g){g=g.box;if(void 0!==g)return f.left>g.left&&f.left<g.left+g.width&&f.top>g.top&&f.top<g.top+g.height});0===
c.length&&(c=void 0);b?d.zoomOut({center:a,axes:c,amount:e}):d.zoom({center:a,axes:c,amount:e})}function G(a,b){var e=1>=Math.abs(a.originalEvent.deltaY)?1+Math.abs(a.originalEvent.deltaY)/50:null;z&&A(a);if(d.getOptions().zoom.active)return a.preventDefault(),P(a,0>b,e),!1}function H(a){C=!0}function I(a){C=!1}function J(a){if(!C||0!==a.button)return!1;z=!0;a=y.getPageXY(a);var b=d.getPlaceholder().offset();b.left=a.X-b.left;b.top=a.Y-b.top;q=d.getXAxes().concat(d.getYAxes()).filter(function(c){c=
c.box;if(void 0!==c)return b.left>c.left&&b.left<c.left+c.width&&b.top>c.top&&b.top<c.top+c.height});0===q.length&&(q=void 0);var e=d.getPlaceholder().css("cursor");e&&(K=e);d.getPlaceholder().css("cursor",d.getOptions().pan.cursor);p=d.navigationState(a.X,a.Y)}function L(a){var b=y.getPageXY(a);a=d.getOptions().pan.frameRate;-1===a?d.smartPan({x:p.startPageX-b.X,y:p.startPageY-b.Y},p,q):!v&&a&&(v=setTimeout(function(){d.smartPan({x:p.startPageX-b.X,y:p.startPageY-b.Y},p,q);v=null},1/a*1E3))}function A(a){v&&
(clearTimeout(v),v=null);z=!1;a=y.getPageXY(a);d.getPlaceholder().css("cursor",K);d.smartPan({x:p.startPageX-a.X,y:p.startPageY-a.Y},p,q);n=null}function M(a){d.activate();var b=d.getTouchedAxis(a.clientX,a.clientY);a=b[0]?new k.Event("re-center",{detail:{axisTouched:b[0]}}):new k.Event("re-center",{detail:a});d.getPlaceholder().trigger(a)}function N(a){d.activate();z&&A(a);return!1}var q=null,C=!1,K="default",n=null,v=null,p,z=!1;d.navigationState=function(a,b){var e=this.getAxes(),c={};Object.keys(e).forEach(function(f){var g=
e[f];c[f]={navigationOffset:{below:g.options.offset.below||0,above:g.options.offset.above||0},axisMin:g.min,axisMax:g.max,diagMode:!1}});c.startPageX=a||0;c.startPageY=b||0;return c};d.activate=function(){var a=d.getOptions();a.pan.active&&a.zoom.active||(a.pan.active=!0,a.zoom.active=!0,d.getPlaceholder().trigger("plotactivated",[d]))};d.zoomOut=function(a){a||(a={});a.amount||(a.amount=d.getOptions().zoom.amount);a.amount=1/a.amount;d.zoom(a)};d.zoom=function(a){a||(a={});var b=a.center,e=a.amount||
d.getOptions().zoom.amount,c=d.width(),f=d.height(),g=a.axes||d.getAxes();b||(b={left:c/2,top:f/2});var r=b.left/c,l=b.top/f;b={x:{min:b.left-r*c/e,max:b.left+(1-r)*c/e},y:{min:b.top-l*f/e,max:b.top+(1-l)*f/e}};for(var h in g)if(g.hasOwnProperty(h)&&(c=g[h],e=c.options,l=b[c.direction].min,f=b[c.direction].max,r=c.options.offset,(e.axisZoom||!a.axes)&&(a.axes||e.plotZoom))){l=k.plot.saturated.saturate(c.c2p(l));f=k.plot.saturated.saturate(c.c2p(f));if(l>f){var w=l;l=f;f=w}l=k.plot.saturated.saturate(r.below-
(c.min-l));c=k.plot.saturated.saturate(r.above-(c.max-f));e.offset={below:l,above:c}}d.setupGrid(!0);d.draw();a.preventEvent||d.getPlaceholder().trigger("plotzoom",[d,a])};d.pan=function(a){var b={x:+a.left,y:+a.top};isNaN(b.x)&&(b.x=0);isNaN(b.y)&&(b.y=0);k.each(a.axes||d.getAxes(),function(e,c){e=c.options;var f=b[c.direction];if((e.axisPan||!a.axes)&&(e.plotPan||a.axes)&&0!==f){var g=t.saturate(c.c2p(c.p2c(c.min)+f)-c.c2p(c.p2c(c.min)));c=t.saturate(c.c2p(c.p2c(c.max)+f)-c.c2p(c.p2c(c.max)));isFinite(g)||
(g=0);isFinite(c)||(c=0);e.offset={below:t.saturate(g+(e.offset.below||0)),above:t.saturate(c+(e.offset.above||0))}}});d.setupGrid(!0);d.draw();a.preventEvent||d.getPlaceholder().trigger("plotpan",[d,a])};d.recenter=function(a){k.each(a.axes||d.getAxes(),function(b,e){a.axes?"x"===this.direction?e.options.offset={below:0}:"y"===this.direction&&(e.options.offset={above:0}):e.options.offset={below:0,above:0}});d.setupGrid(!0);d.draw()};var Q=function(a,b,e){var c;Object.keys(a).forEach(function(f){c=
a[f];0===e[c.direction]&&(c.options.offset.below=b[f].navigationOffset.below,c.options.offset.above=b[f].navigationOffset.above)})},O={x:0,y:0};d.smartPan=function(a,b,e,c){var f=Math.abs(a.y)<u&&Math.abs(a.x)>=u||Math.abs(a.x)<u&&Math.abs(a.y)>=u,g=d.getAxes(),r;Math.abs(a.x)<u&&Math.abs(a.y)>=u?a={x:0,y:a.y}:Math.abs(a.y)<u&&Math.abs(a.x)>=u&&(a={x:a.x,y:0});var l=0<Math.abs(a.x)&&0<Math.abs(a.y)?!0:!1;l&&(b.diagMode=!0);f&&!0===b.diagMode&&(b.diagMode=!1,Q(g,b,a));n=f?{start:{x:b.startPageX-d.offset().left+
d.getPlotOffset().left,y:b.startPageY-d.offset().top+d.getPlotOffset().top},end:{x:b.startPageX-a.x-d.offset().left+d.getPlotOffset().left,y:b.startPageY-a.y-d.offset().top+d.getPlotOffset().top}}:{start:{x:b.startPageX-d.offset().left+d.getPlotOffset().left,y:b.startPageY-d.offset().top+d.getPlotOffset().top},end:!1};isNaN(a.x)&&(a.x=0);isNaN(a.y)&&(a.y=0);e&&(g=e);var h,w,D,E,B;Object.keys(g).forEach(function(x){h=g[x];w=h.min;D=h.max;r=h.options;B=a[h.direction];E=O[h.direction];if((r.axisPan||
!e)&&(e||r.plotPan)&&0!==B){x=t.saturate(h.c2p(h.p2c(w)-(E-B))-h.c2p(h.p2c(w)));var F=t.saturate(h.c2p(h.p2c(D)-(E-B))-h.c2p(h.p2c(D)));isFinite(x)||(x=0);isFinite(F)||(F=0);h.options.offset.below=t.saturate(x+(h.options.offset.below||0));h.options.offset.above=t.saturate(F+(h.options.offset.above||0))}});O=a;d.setupGrid(!0);d.draw();c||d.getPlaceholder().trigger("plotpan",[d,a,e,b])};d.getTouchedAxis=function(a,b){var e=d.getPlaceholder().offset();e.left=a-e.left;e.top=b-e.top;return d.getXAxes().concat(d.getYAxes()).filter(function(c){c=
c.box;if(void 0!==c)return e.left>c.left&&e.left<c.left+c.width&&e.top>c.top&&e.top<c.top+c.height})};d.hooks.drawOverlay.push(function(a,b){if(n){b.strokeStyle="rgba(96, 160, 208, 0.7)";b.lineWidth=2;b.lineJoin="round";a=Math.round(n.start.x);var e=Math.round(n.start.y);if(q)if("x"===q[0].direction){var c=Math.round(n.start.y);var f=Math.round(n.end.x)}else"y"===q[0].direction&&(f=Math.round(n.start.x),c=Math.round(n.end.y));else f=Math.round(n.end.x),c=Math.round(n.end.y);b.beginPath();if(!1===
n.end)b.moveTo(a,e-m),b.lineTo(a,e+m),b.moveTo(a+m,e),b.lineTo(a-m,e);else{var g=e===c;b.moveTo(a-(g?0:m),e-(g?m:0));b.lineTo(a+(g?0:m),e+(g?m:0));b.moveTo(a,e);b.lineTo(f,c);b.moveTo(f-(g?0:m),c-(g?m:0));b.lineTo(f+(g?0:m),c+(g?m:0))}b.stroke()}});d.hooks.bindEvents.push(function(a,b){var e=a.getOptions();e.zoom.interactive&&b.mousewheel(G);e.pan.interactive&&(a.addEventHandler("dragstart",J,b,0),a.addEventHandler("drag",L,b,0),a.addEventHandler("dragend",A,b,0),b.bind("mousedown",H),b.bind("mouseup",
I));b.dblclick(M);b.click(N)});d.hooks.shutdown.push(function(a,b){b.unbind("mousewheel",G);b.unbind("mousedown",H);b.unbind("mouseup",I);b.unbind("dragstart",J);b.unbind("drag",L);b.unbind("dragend",A);b.unbind("dblclick",M);b.unbind("click",N);v&&clearTimeout(v)})},options:{zoom:{interactive:!1,active:!1,amount:1.5},pan:{interactive:!1,active:!1,cursor:"move",frameRate:60},xaxis:{axisZoom:!0,plotZoom:!0,axisPan:!0,plotPan:!0},yaxis:{axisZoom:!0,plotZoom:!0,axisPan:!0,plotPan:!0}},name:"navigate",
version:"1.3"})})(jQuery);
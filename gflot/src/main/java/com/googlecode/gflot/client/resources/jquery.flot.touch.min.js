'use strict';(function(t){function u(e,v){function f(a){var c=e.getOptions();if(c.pan.active||c.zoom.active)if(b.allowEventPropagation=3<=a.touches.length?!0:!1,d.dispatchEvent(new CustomEvent("touchevent",{detail:a})),n(a))h(a,"pinch");else if(h(a,"pan"),!b.twoTouches||1!==a.touches.length){c=(new Date).getTime();var k=c-b.prevTapTime;0<=k&&500>k&&20>l(b.prevTap.x,b.prevTap.y,b.currentTap.x,b.currentTap.y)?(a.firstTouch=b.prevTap,a.secondTouch=b.currentTap,c=!0):(b.prevTapTime=c,c=!1);c&&h(a,"doubleTap");
h(a,"tap");h(a,"longTap")}}function h(a,c){switch(c){case "pan":w[a.type](a);break;case "pinch":x[a.type](a);break;case "doubleTap":y.onDoubleTap(a);break;case "longTap":m[a.type](a);break;case "tap":p[a.type](a)}}function z(a,c){d=c[0];c[0].addEventListener("touchstart",f,!1);c[0].addEventListener("touchmove",f,!1);c[0].addEventListener("touchend",f,!1)}function A(a,c){c[0].removeEventListener("touchstart",f);c[0].removeEventListener("touchmove",f);c[0].removeEventListener("touchend",f);b.longTapTriggerId&&
(clearTimeout(b.longTapTriggerId),b.longTapTriggerId=null)}function q(a){b.currentTap={x:a.touches[0].pageX,y:a.touches[0].pageY}}function g(a){b.allowEventPropagation||(a.preventDefault(),a.stopPropagation())}function l(a,c,k,r){return Math.sqrt((a-k)*(a-k)+(c-r)*(c-r))}function n(a){return a.touches&&2<=a.touches.length&&a.touches[0].target===e.getEventHolder()&&a.touches[1].target===e.getEventHolder()?!0:!1}var b={twoTouches:!1,currentTapStart:{x:0,y:0},currentTapEnd:{x:0,y:0},prevTap:{x:0,y:0},
currentTap:{x:0,y:0},interceptedLongTap:!1,allowEventPropagation:!1,prevTapTime:null,tapStartTime:null,longTapTriggerId:null},d,w={touchstart:function(a){b.prevTap={x:b.currentTap.x,y:b.currentTap.y};q(a);b.tapStartTime=(new Date).getTime();b.interceptedLongTap=!1;b.currentTapStart={x:a.touches[0].pageX,y:a.touches[0].pageY};b.currentTapEnd={x:a.touches[0].pageX,y:a.touches[0].pageY};d.dispatchEvent(new CustomEvent("panstart",{detail:a}))},touchmove:function(a){g(a);q(a);b.currentTapEnd={x:a.touches[0].pageX,
y:a.touches[0].pageY};b.allowEventPropagation||d.dispatchEvent(new CustomEvent("pandrag",{detail:a}))},touchend:function(a){g(a);b.twoTouches&&1===a.touches.length?(d.dispatchEvent(new CustomEvent("pinchend",{detail:a})),d.dispatchEvent(new CustomEvent("panstart",{detail:a}))):a.touches&&0===a.touches.length&&d.dispatchEvent(new CustomEvent("panend",{detail:a}))}},x={touchstart:function(a){d.dispatchEvent(new CustomEvent("pinchstart",{detail:a}))},touchmove:function(a){g(a);b.twoTouches=n(a);b.allowEventPropagation||
d.dispatchEvent(new CustomEvent("pinchdrag",{detail:a}))},touchend:function(a){g(a)}},y={onDoubleTap:function(a){g(a);d.dispatchEvent(new CustomEvent("doubletap",{detail:a}))}},m={touchstart:function(a){m.waitForLongTap(a)},touchmove:function(a){},touchend:function(a){b.longTapTriggerId&&(clearTimeout(b.longTapTriggerId),b.longTapTriggerId=null)},isLongTap:function(a){return 1500<=(new Date).getTime()-b.tapStartTime&&!b.interceptedLongTap&&20>l(b.currentTapStart.x,b.currentTapStart.y,b.currentTapEnd.x,
b.currentTapEnd.y)?b.interceptedLongTap=!0:!1},waitForLongTap:function(a){b.longTapTriggerId||(b.longTapTriggerId=setTimeout(function(){m.isLongTap(a)&&d.dispatchEvent(new CustomEvent("longtap",{detail:a}));b.longTapTriggerId=null},1500))}},p={touchstart:function(a){b.tapStartTime=(new Date).getTime()},touchmove:function(a){},touchend:function(a){p.isTap(a)&&(d.dispatchEvent(new CustomEvent("tap",{detail:a})),g(a))},isTap:function(a){return 125>=(new Date).getTime()-b.tapStartTime&&20>l(b.currentTapStart.x,
b.currentTapStart.y,b.currentTapEnd.x,b.currentTapEnd.y)?!0:!1}};!0===v.pan.enableTouch&&(e.hooks.bindEvents.push(z),e.hooks.shutdown.push(A))}t.plot.plugins.push({init:function(e){e.hooks.processOptions.push(u)},options:{pan:{enableTouch:!1}},name:"navigateTouch",version:"0.3"})})(jQuery);
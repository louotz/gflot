'use strict';(function(v){function z(b,f){function e(a,c){a.getOptions().pan.interactive&&(c[0].addEventListener("panstart",m.start,!1),c[0].addEventListener("pandrag",m.drag,!1),c[0].addEventListener("panend",m.end,!1),c[0].addEventListener("pinchstart",n.start,!1),c[0].addEventListener("pinchdrag",n.drag,!1),c[0].addEventListener("pinchend",n.end,!1),c[0].addEventListener("doubletap",w.recenterPlot,!1))}function h(a,c){c[0].removeEventListener("panstart",m.start);c[0].removeEventListener("pandrag",
m.drag);c[0].removeEventListener("panend",m.end);c[0].removeEventListener("pinchstart",n.start);c[0].removeEventListener("pinchdrag",n.drag);c[0].removeEventListener("pinchend",n.end);c[0].removeEventListener("doubletap",w.recenterPlot)}function p(a,c,k){c=g;"pinchstart"===a.type?(c=b.getTouchedAxis(a.detail.touches[0].pageX,a.detail.touches[0].pageY),a=b.getTouchedAxis(a.detail.touches[1].pageX,a.detail.touches[1].pageY),a=c.length===a.length&&c.toString()===a.toString()?c:void 0):a="panstart"===
a.type?b.getTouchedAxis(a.detail.touches[0].pageX,a.detail.touches[0].pageY):"pinchend"===a.type?b.getTouchedAxis(a.detail.touches[0].pageX,a.detail.touches[0].pageY):c.touchedAxis;g.touchedAxis=a;g.navigationConstraint=g.touchedAxis&&0!==g.touchedAxis.length?"axisConstrained":"unconstrained"}var d={zoomEnable:!1,prevDistance:null,prevTapTime:0,prevPanPosition:{x:0,y:0},prevTapPosition:{x:0,y:0}},g={prevTouchedAxis:"none",currentTouchedAxis:"none",touchedAxis:null,navigationConstraint:"unconstrained"};
var m={start:function(a){p(a,"pan",d);x(a,"pan",d,g)},drag:function(a){p(a,"pan",d);b.pan({left:-r(a,"pan",d).x,top:-r(a,"pan",d).y,axes:g.touchedAxis});y(a,"pan",d,g)},end:function(a){p(a,"pan",d);d.zoomEnable&&1===a.detail.touches.length&&updateprevPanPosition(a,"pan",d,g)}};var l;var n={start:function(a){l&&(clearTimeout(l),l=null);p(a,"pinch",d);d.prevDistance=t(a);x(a,"pinch",d,g)},drag:function(a){l||(l=setTimeout(function(){p(a,"pinch",d);b.pan({left:-r(a,"pinch",d).x,top:-r(a,"pinch",d).y,
axes:g.touchedAxis});y(a,"pinch",d,g);var c=t(a);if(d.zoomEnable||Math.abs(c-d.prevDistance)>A){c=g;var k=b.offset(),u={left:0,top:0},B=t(a)/d.prevDistance,C=t(a);u.left=q(a,"pinch").x-k.left;u.top=q(a,"pinch").y-k.top;b.zoom({center:u,amount:B,axes:c.touchedAxis});d.prevDistance=C;d.zoomEnable=!0}l=null},1E3/60))},end:function(a){l&&(clearTimeout(l),l=null);p(a,"pinch",d);d.prevDistance=null}};var w={recenterPlot:function(a){var c=g,k=b.getTouchedAxis(a.detail.firstTouch.x,a.detail.firstTouch.y);
void 0!==k[0]&&(c.prevTouchedAxis=k[0].direction);k=b.getTouchedAxis(a.detail.secondTouch.x,a.detail.secondTouch.y);void 0!==k[0]&&(c.touchedAxis=k,c.currentTouchedAxis=k[0].direction);c.touchedAxis&&0!==c.touchedAxis.length||(c.touchedAxis=null,c.prevTouchedAxis="none",c.currentTouchedAxis="none");("x"===c.currentTouchedAxis&&"x"===c.prevTouchedAxis||"y"===c.currentTouchedAxis&&"y"===c.prevTouchedAxis||"none"===c.currentTouchedAxis&&"none"===c.prevTouchedAxis)&&b.recenter({axes:c.touchedAxis})}};
!0===f.pan.enableTouch&&(b.hooks.bindEvents.push(e),b.hooks.shutdown.push(h))}function x(b,f,e,h){f=q(b,f);switch(h.navigationConstraint){case "unconstrained":h.touchedAxis=null;e.prevTapPosition={x:e.prevPanPosition.x,y:e.prevPanPosition.y};e.prevPanPosition={x:f.x,y:f.y};break;case "axisConstrained":b=h.touchedAxis[0].direction,h.currentTouchedAxis=b,e.prevTapPosition[b]=e.prevPanPosition[b],e.prevPanPosition[b]=f[b]}}function t(b){var f=b.detail.touches[0],e=b.detail.touches[1];b=f.pageX;f=f.pageY;
var h=e.pageX;e=e.pageY;return Math.sqrt((b-h)*(b-h)+(f-e)*(f-e))}function y(b,f,e,h){b=q(b,f);switch(h.navigationConstraint){case "unconstrained":e.prevPanPosition.x=b.x;e.prevPanPosition.y=b.y;break;case "axisConstrained":e.prevPanPosition[h.currentTouchedAxis]=b[h.currentTouchedAxis]}}function r(b,f,e){b=q(b,f);return{x:b.x-e.prevPanPosition.x,y:b.y-e.prevPanPosition.y}}function q(b,f){return"pinch"===f?{x:(b.detail.touches[0].pageX+b.detail.touches[1].pageX)/2,y:(b.detail.touches[0].pageY+b.detail.touches[1].pageY)/
2}:{x:b.detail.touches[0].pageX,y:b.detail.touches[0].pageY}}var A=v.plot.uiConstants.ZOOM_DISTANCE_MARGIN;v.plot.plugins.push({init:function(b){b.hooks.processOptions.push(z)},options:{pan:{enableTouch:!1}},name:"navigateTouch",version:"0.3"})})(jQuery);